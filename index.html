<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="data"></div> <code>user Online</code>
    <br>
    <code id="data1"></code> <code>user Online</code>
    <button id="tombol">Ping</button>
</body>
<script>
    const ws = new WebSocket("ws://localhost:3000")

  ws.addEventListener("open", function open()  {
      console.log("Terhubung");
      ws.send("hi server");
  });
  ws.addEventListener('message', function incoming(data) {
  console.log(data);
  document.getElementById("data1").innerText = JSON.parse(data.data).user
//   document.getElementById("data").innerText = JSON.parse(data.short).user
});
  ws.addEventListener('message', function incoming(short) {
  console.log(short);
//   document.getElementById("data").innerText = JSON.parse(data.short).user
});

//   ws.addEventListener("message", e =>{
//       console.log(e);
//     });
    
//     ws.addEventListener("message", ({data}) =>{
//         console.log(data);
//         document.getElementById("data").innerText = JSON.parse(data).user
//   });

    document.getElementById("tombol"),addEventListener('click',function() {
      ws.emit('pesan',{
          pea: 'haha'
      });
    });

    ws.addEventListener('pesan',function(data){
        document.getElementById("data").innerText = data.user;
    })
</script>
<script>
  
</script>
</html>